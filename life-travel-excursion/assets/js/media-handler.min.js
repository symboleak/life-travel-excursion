!function(t){"use strict";var e={init:function(){this.detectFeatures(),this.preloadCriticalImages(),this.setupResponsiveImages(),this.setupVideoHandlers(),this.setupLogoHandling(),this.setupBackgroundImages()},detectFeatures:function(){this.hasIntersectionObserver="IntersectionObserver"in window,this.supportsWebP=!1;var t=new Image;t.onload=function(){e.supportsWebP=!0},t.onerror=function(){e.supportsWebP=!1},t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},preloadCriticalImages:function(){if("undefined"!=typeof LifeTravelParams&&LifeTravelParams.visual_elements){var t=[LifeTravelParams.visual_elements.logo_url];LifeTravelParams.visual_elements.default_background&&t.push(LifeTravelParams.visual_elements.default_background),t.forEach(function(t){if(t){var e=new Image;e.src=t}})}},setupResponsiveImages:function(){if(this.hasIntersectionObserver){var t={rootMargin:"200px 0px",threshold:.01},e=new IntersectionObserver(function(t,s){t.forEach(function(t){if(t.isIntersecting){var r=t.target;r.getAttribute("data-src")&&(r.src=r.getAttribute("data-src"),r.removeAttribute("data-src")),r.getAttribute("data-srcset")&&(r.srcset=r.getAttribute("data-srcset"),r.removeAttribute("data-srcset")),s.unobserve(r)}})},t);document.querySelectorAll("img[data-src]").forEach(function(t){e.observe(t)})}else document.querySelectorAll("img[data-src]").forEach(function(t){t.src=t.getAttribute("data-src"),t.removeAttribute("data-src"),t.getAttribute("data-srcset")&&(t.srcset=t.getAttribute("data-srcset"),t.removeAttribute("data-srcset"))})},setupVideoHandlers:function(){if(this.hasIntersectionObserver){var e={rootMargin:"100px 0px",threshold:.1},s=new IntersectionObserver(function(t,e){t.forEach(function(t){if(t.isIntersecting){var s=t.target;if(s.getAttribute("data-src")){var r=document.createElement("source");r.src=s.getAttribute("data-src"),r.type=s.getAttribute("data-type")||"video/mp4",s.appendChild(r),s.load(),s.removeAttribute("data-src"),s.removeAttribute("data-type"),s.hasAttribute("data-autoplay")&&(s.muted=!0,s.play().catch(function(t){console.log("Autoplay prevented:",t)}))}e.unobserve(s)}})},e);document.querySelectorAll("video[data-src]").forEach(function(t){s.observe(t)})}t(".youtube-thumbnail").on("click",function(){var e=t(this),s=e.data("video-id"),r=t("<iframe>",{src:"https://www.youtube.com/embed/"+s+"?autoplay=1",frameborder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0});e.replaceWith(r)})},setupLogoHandling:function(){var e=function(){var t=window.innerWidth,e=document.querySelector(".site-logo");if(e){t<768?(e.hasAttribute("data-original-width")||e.setAttribute("data-original-width",e.style.maxWidth||"auto"),e.style.maxWidth="160px"):e.hasAttribute("data-original-width")&&(e.style.maxWidth=e.getAttribute("data-original-width"));null!==e.closest(".dark-header")?e.classList.add("white-version"):e.classList.remove("white-version")}};e(),t(window).on("resize",e),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(function(t){e()})},setupBackgroundImages:function(){if(this.hasIntersectionObserver){var t={rootMargin:"200px 0px",threshold:.01},e=new IntersectionObserver(function(t,s){t.forEach(function(t){if(t.isIntersecting){var r=t.target,i=r.getAttribute("data-bg");if(i){r.style.backgroundImage="url("+i+")",r.removeAttribute("data-bg");var o=new Image;o.onload=function(){r.classList.add("bg-loaded")},o.src=i,s.unobserve(r)}}})},t);document.querySelectorAll("[data-bg]").forEach(function(t){e.observe(t)})}else document.querySelectorAll("[data-bg]").forEach(function(t){var e=t.getAttribute("data-bg");e&&(t.style.backgroundImage="url("+e+")",t.removeAttribute("data-bg"),t.classList.add("bg-loaded"))})}};t(document).ready(function(){e.init(),t.fn.lightbox&&t(".gallery-image a").lightbox({gallery:!0,loop:!0})})}(jQuery);
